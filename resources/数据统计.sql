CREATE TABLE `sn_same_name` (`keyId` varchar(64) NOT NULL COMMENT '主键ID',`sameName` varchar(32) NOT NULL COMMENT '统计名称',`countProvince` varchar(255) NOT NULL COMMENT '各个省份的数量统计，逗号隔开的，int',`createTime` datetime NOT NULL COMMENT '创建时间',PRIMARY KEY (`keyId`) )COMMENT='同名表';CREATE TABLE `sn_province` (`keyId` varchar(64) NOT NULL COMMENT '主键ID',`name` varchar(32) NOT NULL COMMENT '省份的名称',`code` smallint NOT NULL COMMENT '省份所国家统一编号',`createTime` datetime NOT NULL COMMENT '创建时间',PRIMARY KEY (`keyId`) )COMMENT='省份排序';CREATE TABLE `sn_query_count` (`keyId` varchar(64) NOT NULL COMMENT '主键ID',`sameNameId` varchar(32) NOT NULL COMMENT '姓名外键',`count` int NOT NULL,`createTime` datetime NOT NULL COMMENT '创建时间',PRIMARY KEY (`keyId`) )COMMENT='同名表查询统计';CREATE TABLE `sn_same_name_error` (`keyId` varchar(64) NOT NULL COMMENT '主键ID',`sameName` varchar(32) NOT NULL COMMENT '统计名称',`countProvince` varchar(255) NOT NULL COMMENT '各个省份的数量统计，逗号隔开的，int',`createTime` datetime NOT NULL COMMENT '创建时间',PRIMARY KEY (`keyId`) )COMMENT='异常同名表';CREATE TABLE `ds_application` (`keyId` varchar(64) NOT NULL COMMENT 'ID主键',`name` varchar(64) NOT NULL COMMENT '应用名称',`type` varchar(64) NOT NULL COMMENT '应用类型（Android,IOS,Windows）',`description` varchar(64) NULL COMMENT '应用描述',`createTime` datetime NOT NULL COMMENT '创建时间',`updateTime` datetime NOT NULL COMMENT '更新时间',PRIMARY KEY (`keyId`) )COMMENT='注册应用';CREATE TABLE `ds_exceptional` (`keyId` varchar(64) NOT NULL COMMENT 'ID主键',`appId` varchar(64) NULL COMMENT '应用ID',`name` varchar(64) NOT NULL COMMENT '应用名称',`description` varchar(64) NULL COMMENT '应用描述',`createTime` datetime NOT NULL COMMENT '创建时间',`updateTime` datetime NOT NULL COMMENT '更新时间',`user` varchar(256) NULL COMMENT '用户相关信息（建议用JSON，max-256）',`device` varchar(256) NULL COMMENT '设备信息',`version` varchar(16) NOT NULL COMMENT '应用版本信息',`message` varchar(256) NULL COMMENT '错误信息',`stack` text NULL COMMENT '错误堆栈信息',`thread` varchar(64) NULL COMMENT '错误线程信息',`platform` varchar(64) NULL COMMENT '运行平台（Android,IOS,Windows）',`status` int NOT NULL COMMENT '状态（0-无效 1-新错误 2-正在处理 3-处理完成提交 4-确认问题已经解决）',PRIMARY KEY (`keyId`) )COMMENT='异常统计';CREATE TABLE `ds_feedback` (`keyId` varchar(64) NOT NULL COMMENT 'ID主键',`replyId` varchar(64) NULL COMMENT '回复ID',`isReply` tinyint(1) NULL COMMENT '是否官方回复',`appId` varchar(64) NULL COMMENT '应用ID',`title` varchar(64) NULL COMMENT '反馈标题',`content` varchar(64) NOT NULL COMMENT '反馈内容',`contact` varchar(64) NULL COMMENT '联系方式',`createTime` datetime NOT NULL COMMENT '创建时间',`updateTime` datetime NOT NULL COMMENT '更新时间',`user` varchar(256) NULL COMMENT '用户相关信息（建议用JSON，max-256）',`version` varchar(16) NOT NULL COMMENT '应用版本信息',`bug` varchar(256) NULL COMMENT '错误信息',PRIMARY KEY (`keyId`) )COMMENT='用户反馈';CREATE TABLE `ds_device` (`keyId` varchar(64) NOT NULL COMMENT 'ID主键',`uniqueId` varchar(64) NOT NULL COMMENT '设备唯一ID',`appId` varchar(64) NOT NULL COMMENT '应用ID',`imei` varchar(64) NULL COMMENT '设备imei',`mac` varchar(64) NULL COMMENT '设备mac地址',`userId` varchar(64) NULL COMMENT '用户相关ID',`createTime` datetime NOT NULL COMMENT '创建时间',`updateTime` datetime NOT NULL COMMENT '更新时间',PRIMARY KEY (`keyId`) ,UNIQUE INDEX `uniqueId` (`uniqueId`))COMMENT='设备统计';CREATE TABLE `ds_event` (`keyId` varchar(64) NOT NULL COMMENT 'ID主键',`eventId` varchar(64) NOT NULL COMMENT '事件ID',`uniqueId` varchar(64) NOT NULL COMMENT '设备唯一ID',`appId` varchar(64) NOT NULL COMMENT '应用ID',`parameter` varchar(64) NULL COMMENT '事件参数',`remark` varchar(256) NULL COMMENT '备注',`userId` varchar(64) NULL COMMENT '用户相关ID',`createTime` datetime NOT NULL COMMENT '创建时间',`updateTime` datetime NOT NULL COMMENT '更新时间',PRIMARY KEY (`keyId`) )COMMENT='事件统计';CREATE TABLE `ds_device_initiate` (`keyId` varchar(64) NOT NULL COMMENT 'ID主键',`type` varchar(32) NOT NULL COMMENT '启动类型（start，close）',`uniqueId` varchar(64) NOT NULL COMMENT '设备唯一ID',`appId` varchar(64) NOT NULL COMMENT '应用ID',`channel` varchar(32) NOT NULL COMMENT '渠道',`isNew` tinyint(1) NOT NULL COMMENT '是否新用户',`userId` varchar(64) NULL COMMENT '用户相关ID',`createTime` datetime NOT NULL COMMENT '创建时间',`updateTime` datetime NOT NULL COMMENT '更新时间',PRIMARY KEY (`keyId`) )COMMENT='设备启动统计';ALTER TABLE `sn_query_count` ADD CONSTRAINT `fk_t_query_count_t_same_name` FOREIGN KEY (`sameNameId`) REFERENCES `sn_same_name` (`keyId`);ALTER TABLE `ds_exceptional` ADD CONSTRAINT `fk_ds_exceptional_ds_application_1` FOREIGN KEY (`appId`) REFERENCES `ds_application` (`keyId`);ALTER TABLE `ds_feedback` ADD CONSTRAINT `fk_ds_feedback_ds_application_1` FOREIGN KEY (`appId`) REFERENCES `ds_application` (`keyId`);ALTER TABLE `ds_event` ADD CONSTRAINT `fk_ds_event_ds_application_1` FOREIGN KEY (`appId`) REFERENCES `ds_application` (`keyId`);ALTER TABLE `ds_device` ADD CONSTRAINT `fk_ds_device_ds_application_1` FOREIGN KEY (`appId`) REFERENCES `ds_application` (`keyId`);ALTER TABLE `ds_device_initiate` ADD CONSTRAINT `fk_ds_device_initiate_ds_device_1` FOREIGN KEY (`uniqueId`) REFERENCES `ds_device` (`uniqueId`);ALTER TABLE `ds_device_initiate` ADD CONSTRAINT `fk_ds_device_initiate_ds_application_1` FOREIGN KEY (`appId`) REFERENCES `ds_application` (`keyId`);